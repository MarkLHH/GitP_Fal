{"ast":null,"code":"import React,{useContext}from'react';import{Media,Row,Col}from'reactstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import Avatar from'../../common/Avatar';import FalconLightBox from'../../common/FalconLightBox';import LightBoxGallery from'../../common/LightBoxGallery';import Flex from'../../common/Flex';import ChatMessageOptions from'./ChatMessageOptions';import{isIterableArray}from'../../../helpers/utils';import{ChatContext}from'../../../context/Context';import classNames from'classnames';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Message=function Message(_ref){var message=_ref.message,senderUserId=_ref.senderUserId,status=_ref.status,time=_ref.time,isGroup=_ref.isGroup;var _useContext=useContext(ChatContext),users=_useContext.users;var user=users.find(function(_ref2){var id=_ref2.id;return id===senderUserId;});var name=user===null||user===void 0?void 0:user.name.split(' ')[0];var isLeft=senderUserId!==3;return/*#__PURE__*/_jsxs(Media,{className:classNames('p-3',{'d-block':!isLeft}),children:[isLeft&&/*#__PURE__*/_jsx(Avatar,{size:\"l\",className:\"mr-2\",src:user.avatarSrc}),/*#__PURE__*/_jsx(Media,{body:true,className:classNames({'d-flex  justify-content-end':!isLeft}),children:/*#__PURE__*/_jsxs(\"div\",{className:classNames('w-xxl-75',{'w-100':!isLeft}),children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",className:classNames('hover-actions-trigger',{'justify-content-end':!isLeft}),children:[!isLeft&&/*#__PURE__*/_jsx(ChatMessageOptions,{}),isIterableArray(message===null||message===void 0?void 0:message.attachment)?/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message chat-gallery\",children:[message.text&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",dangerouslySetInnerHTML:{__html:message.text?message.text:message}}),/*#__PURE__*/_jsx(LightBoxGallery,{images:message.attachment,children:function children(openImgIndex){return/*#__PURE__*/_jsx(Row,{noGutters:true,className:\"mx-n1\",children:message.attachment.map(function(img,index){return/*#__PURE__*/_jsx(Col,{xs:6,md:4,className:\"px-1\",style:{minWidth:50},children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid rounded mb-2 cursor-pointer\",src:img,alt:\"\",onClick:function onClick(){return openImgIndex(index);}})},index);})});}})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classNames('p-2 rounded-soft chat-message',{'bg-200':isLeft,'bg-primary text-white':!isLeft}),children:[(message||message.text)&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",dangerouslySetInnerHTML:{__html:message.text?message.text:message}}),message.attachment&&/*#__PURE__*/_jsx(FalconLightBox,{imgSrc:message.attachment,children:/*#__PURE__*/_jsx(\"img\",{src:message.attachment,className:\"img-fluid rounded\",width:150,alt:\"\"})})]})}),isLeft&&/*#__PURE__*/_jsx(ChatMessageOptions,{})]}),/*#__PURE__*/_jsxs(\"div\",{className:classNames('text-400 fs--2 mt-1',{'text-right':!isLeft}),children:[isLeft&&isGroup&&/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-semi-bold mr-2\",children:name}),time.hour,!isLeft&&!!message&&!!status&&/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:classNames({check:status==='seen'||status==='sent','check-double':status==='delivered'}),transform:\"shrink-5 down-4\",className:classNames('ml-2',{'text-success':status==='seen'})})]})]})})]});};Message.defaultProps={status:''};export default Message;","map":{"version":3,"sources":["/workspace/GitP_Fal/src/components/chat/content/Message.js"],"names":["React","useContext","Media","Row","Col","FontAwesomeIcon","Avatar","FalconLightBox","LightBoxGallery","Flex","ChatMessageOptions","isIterableArray","ChatContext","classNames","Message","message","senderUserId","status","time","isGroup","users","user","find","id","name","split","isLeft","avatarSrc","attachment","text","__html","openImgIndex","map","img","index","minWidth","hour","check","defaultProps"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Media, Row, Col } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Avatar from '../../common/Avatar';\nimport FalconLightBox from '../../common/FalconLightBox';\nimport LightBoxGallery from '../../common/LightBoxGallery';\nimport Flex from '../../common/Flex';\nimport ChatMessageOptions from './ChatMessageOptions';\nimport { isIterableArray } from '../../../helpers/utils';\nimport { ChatContext } from '../../../context/Context';\nimport classNames from 'classnames';\n\nconst Message = ({ message, senderUserId, status, time, isGroup }) => {\n  const { users } = useContext(ChatContext);\n  const user = users.find(({ id }) => id === senderUserId);\n  const name = user?.name.split(' ')[0];\n  const isLeft = senderUserId !== 3;\n\n  return (\n    <Media className={classNames('p-3', { 'd-block': !isLeft })}>\n      {isLeft && <Avatar size=\"l\" className=\"mr-2\" src={user.avatarSrc} />}\n      <Media body className={classNames({ 'd-flex  justify-content-end': !isLeft })}>\n        <div\n          className={classNames('w-xxl-75', {\n            'w-100': !isLeft\n          })}\n        >\n          <Flex\n            align=\"center\"\n            className={classNames('hover-actions-trigger', {\n              'justify-content-end': !isLeft\n            })}\n          >\n            {!isLeft && <ChatMessageOptions />}\n            {isIterableArray(message?.attachment) ? (\n              <div className=\"chat-message chat-gallery\">\n                {message.text && (\n                  <p className=\"mb-0\" dangerouslySetInnerHTML={{ __html: message.text ? message.text : message }} />\n                )}\n                <LightBoxGallery images={message.attachment}>\n                  {openImgIndex => (\n                    <Row noGutters className=\"mx-n1\">\n                      {message.attachment.map((img, index) => {\n                        return (\n                          <Col xs={6} md={4} className=\"px-1\" style={{ minWidth: 50 }} key={index}>\n                            <img\n                              className=\"img-fluid rounded mb-2 cursor-pointer\"\n                              src={img}\n                              alt=\"\"\n                              onClick={() => openImgIndex(index)}\n                            />\n                          </Col>\n                        );\n                      })}\n                    </Row>\n                  )}\n                </LightBoxGallery>\n              </div>\n            ) : (\n              <>\n                <div\n                  className={classNames('p-2 rounded-soft chat-message', {\n                    'bg-200': isLeft,\n                    'bg-primary text-white': !isLeft\n                  })}\n                >\n                  {(message || message.text) && (\n                    <p className=\"mb-0\" dangerouslySetInnerHTML={{ __html: message.text ? message.text : message }} />\n                  )}\n                  {message.attachment && (\n                    <FalconLightBox imgSrc={message.attachment}>\n                      <img src={message.attachment} className=\"img-fluid rounded\" width={150} alt=\"\" />\n                    </FalconLightBox>\n                  )}\n                </div>\n              </>\n            )}\n            {isLeft && <ChatMessageOptions />}\n          </Flex>\n          <div\n            className={classNames('text-400 fs--2 mt-1', {\n              'text-right': !isLeft\n            })}\n          >\n            {isLeft && isGroup && <span className=\"font-weight-semi-bold mr-2\">{name}</span>}\n            {time.hour}\n            {!isLeft && !!message && !!status && (\n              <FontAwesomeIcon\n                icon={classNames({\n                  check: status === 'seen' || status === 'sent',\n                  'check-double': status === 'delivered'\n                })}\n                transform=\"shrink-5 down-4\"\n                className={classNames('ml-2', {\n                  'text-success': status === 'seen'\n                })}\n              />\n            )}\n          </div>\n        </div>\n      </Media>\n    </Media>\n  );\n};\nMessage.propTypes = {\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  senderUserId: PropTypes.number.isRequired,\n  status: PropTypes.string,\n  time: PropTypes.object.isRequired,\n  isGroup: PropTypes.bool.isRequired\n};\n\nMessage.defaultProps = { status: '' };\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}