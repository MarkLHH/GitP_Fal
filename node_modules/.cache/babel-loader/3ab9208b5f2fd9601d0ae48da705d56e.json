{"ast":null,"code":"import _objectSpread from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from'react';import{Card,CardBody,CardFooter,Col,Row,Table}from'reactstrap';import Loader from'../common/Loader';import ButtonIcon from'../common/ButtonIcon';import createMarkup from'../../helpers/createMarkup';import{isIterableArray}from'../../helpers/utils';import useFakeFetch from'../../hooks/useFakeFetch';import rawInvoice from'../../data/invoice/invoice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var calculateSubtotal=function calculateSubtotal(products){return products.reduce(function(currentValue,product){return product.quantity*product.rate+currentValue;},0);};var formatCurrency=function formatCurrency(number,currency){return\"\".concat(currency).concat(number.toFixed(2).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g,'$1,'));};var ProductTr=function ProductTr(_ref){var name=_ref.name,description=_ref.description,quantity=_ref.quantity,rate=_ref.rate;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"align-middle\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0 text-nowrap\",children:name}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:description})]}),/*#__PURE__*/_jsx(\"td\",{className:\"align-middle text-center\",children:quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"align-middle text-right\",children:[\"$\",rate]}),/*#__PURE__*/_jsxs(\"td\",{className:\"align-middle text-right\",children:[\"$\",quantity*rate]})]});};var InvoiceHeader=function InvoiceHeader(_ref2){var institution=_ref2.institution,logo=_ref2.logo,address=_ref2.address;return/*#__PURE__*/_jsxs(Row,{className:\"align-items-center text-center mb-3\",children:[/*#__PURE__*/_jsx(Col,{sm:6,className:\"text-sm-left\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"invoice\",width:150})}),/*#__PURE__*/_jsxs(Col,{className:\"text-sm-right mt-3 mt-sm-0\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-3\",children:\"Invoice\"}),/*#__PURE__*/_jsx(\"h5\",{children:institution}),address&&/*#__PURE__*/_jsx(\"p\",{className:\"fs--1 mb-0\",dangerouslySetInnerHTML:createMarkup(address)})]}),/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsx(\"hr\",{})})]});};var Invoice=function Invoice(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),subtotal=_useState2[0],setSubtotal=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),tax=_useState4[0],setTax=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var _useFakeFetch=useFakeFetch(rawInvoice),invoiceLoading=_useFakeFetch.loading,invoice=_useFakeFetch.data;useEffect(function(){if(isIterableArray(invoice.products)){setSubtotal(calculateSubtotal(invoice.products));}},[invoice]);useEffect(function(){setTax(subtotal*invoice.tax);},[subtotal,invoice]);useEffect(function(){setTotal(subtotal+tax);},[subtotal,tax]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:true,children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2 mb-md-0\",children:[\"Order #\",invoiceLoading?'':invoice.summary.order_number]})}),/*#__PURE__*/_jsxs(Col,{xs:\"auto\",children:[/*#__PURE__*/_jsx(ButtonIcon,{color:\"falcon-default\",size:\"sm\",icon:\"arrow-down\",className:\"mr-2 mb-2 mb-sm-0\",children:\"Download (.pdf)\"}),/*#__PURE__*/_jsx(ButtonIcon,{color:\"falcon-default\",size:\"sm\",icon:\"print\",className:\"mr-2 mb-2 mb-sm-0\",children:\"Print\"}),/*#__PURE__*/_jsx(ButtonIcon,{color:\"falcon-success\",size:\"sm\",icon:\"dollar-sign\",className:\"mb-2 mb-sm-0\",children:\"Receive Payment\"})]})]})})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardBody,{children:[invoiceLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(InvoiceHeader,{institution:invoice.institution,logo:invoice.logo,address:invoice.address}),invoiceLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Row,{className:\"justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-500\",children:\"Invoice to\"}),/*#__PURE__*/_jsx(\"h5\",{children:invoice.user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"fs--1\",dangerouslySetInnerHTML:createMarkup(invoice.user.address)}),/*#__PURE__*/_jsxs(\"p\",{className:\"fs--1\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(invoice.user.email),children:invoice.user.email}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(invoice.user.cell.split('-').join('')),children:invoice.user.cell})]})]}),/*#__PURE__*/_jsx(Col,{sm:\"auto\",className:\"ml-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(Table,{size:\"sm\",borderless:true,className:\"fs--1\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-sm-right\",children:\"Invoice No:\"}),/*#__PURE__*/_jsx(\"td\",{children:invoice.summary.invoice_no})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-sm-right\",children:\"Order Number:\"}),/*#__PURE__*/_jsx(\"td\",{children:invoice.summary.order_number})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-sm-right\",children:\"Invoice Date:\"}),/*#__PURE__*/_jsx(\"td\",{children:invoice.summary.invoice_date})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-sm-right\",children:\"Payment Due:\"}),/*#__PURE__*/_jsx(\"td\",{children:invoice.summary.payment_due})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"alert-success font-weight-bold\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-sm-right\",children:\"Amount Due:\"}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(invoice.summary.amount_due,invoice.currency)})]})]})})})})]}),invoiceLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive mt-4 fs--1\",children:/*#__PURE__*/_jsxs(Table,{striped:true,className:\"border-bottom\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-primary text-white\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border-0\",children:\"Products\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border-0 text-center\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border-0 text-right\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border-0 text-right\",children:\"Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:isIterableArray(invoice.products)&&invoice.products.map(function(product,index){return/*#__PURE__*/_createElement(ProductTr,_objectSpread(_objectSpread({},product),{},{key:index}));})})]})}),invoiceLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(Row,{noGutters:true,className:\"justify-content-end\",children:/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsx(Table,{size:\"sm\",borderless:true,className:\"fs--1 text-right\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-900\",children:\"Subtotal:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"font-weight-semi-bold\",children:formatCurrency(subtotal,invoice.currency)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-900\",children:\"Tax 8%:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"font-weight-semi-bold\",children:formatCurrency(tax,invoice.currency)})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"border-top\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-900\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"font-weight-semi-bold\",children:formatCurrency(total,invoice.currency)})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"border-top border-2x font-weight-bold text-900\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Amount Due:\"}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(invoice.summary.amount_due+total,invoice.currency)})]})]})})})})]}),/*#__PURE__*/_jsx(CardFooter,{className:\"bg-light\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"fs--1 mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes: \"}),\"We really appreciate your business and if there\\u2019s anything else we can do, please let us know!\"]})})]})]});};export default Invoice;","map":{"version":3,"sources":["/workspace/GitP_Fal/src/components/page/Invoice.js"],"names":["React","Fragment","useEffect","useState","Card","CardBody","CardFooter","Col","Row","Table","Loader","ButtonIcon","createMarkup","isIterableArray","useFakeFetch","rawInvoice","calculateSubtotal","products","reduce","currentValue","product","quantity","rate","formatCurrency","number","currency","toFixed","replace","ProductTr","name","description","InvoiceHeader","institution","logo","address","Invoice","subtotal","setSubtotal","tax","setTax","total","setTotal","invoiceLoading","loading","invoice","data","summary","order_number","user","email","cell","split","join","invoice_no","invoice_date","payment_due","amount_due","map","index"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, CardBody, CardFooter, Col, Row, Table } from 'reactstrap';\nimport Loader from '../common/Loader';\nimport ButtonIcon from '../common/ButtonIcon';\nimport createMarkup from '../../helpers/createMarkup';\nimport { isIterableArray } from '../../helpers/utils';\nimport useFakeFetch from '../../hooks/useFakeFetch';\nimport rawInvoice from '../../data/invoice/invoice';\n\nconst calculateSubtotal = products => {\n  return products.reduce((currentValue, product) => {\n    return product.quantity * product.rate + currentValue;\n  }, 0);\n};\n\nconst formatCurrency = (number, currency) =>\n  `${currency}${number.toFixed(2).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,')}`;\n\nconst ProductTr = ({ name, description, quantity, rate }) => {\n  return (\n    <tr>\n      <td className=\"align-middle\">\n        <h6 className=\"mb-0 text-nowrap\">{name}</h6>\n        <p className=\"mb-0\">{description}</p>\n      </td>\n      <td className=\"align-middle text-center\">{quantity}</td>\n      <td className=\"align-middle text-right\">${rate}</td>\n      <td className=\"align-middle text-right\">${quantity * rate}</td>\n    </tr>\n  );\n};\n\nProductTr.propTypes = {\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  rate: PropTypes.number.isRequired\n};\n\nconst InvoiceHeader = ({ institution, logo, address }) => (\n  <Row className=\"align-items-center text-center mb-3\">\n    <Col sm={6} className=\"text-sm-left\">\n      <img src={logo} alt=\"invoice\" width={150} />\n    </Col>\n    <Col className=\"text-sm-right mt-3 mt-sm-0\">\n      <h2 className=\"mb-3\">Invoice</h2>\n      <h5>{institution}</h5>\n      {address && <p className=\"fs--1 mb-0\" dangerouslySetInnerHTML={createMarkup(address)} />}\n    </Col>\n    <Col xs={12}>\n      <hr />\n    </Col>\n  </Row>\n);\n\nInvoiceHeader.propTypes = {\n  institution: PropTypes.string.isRequired,\n  logo: PropTypes.string.isRequired,\n  address: PropTypes.string\n};\n\nconst Invoice = () => {\n  const [subtotal, setSubtotal] = useState(0);\n  const [tax, setTax] = useState(0);\n  const [total, setTotal] = useState(0);\n  const { loading: invoiceLoading, data: invoice } = useFakeFetch(rawInvoice);\n\n  useEffect(() => {\n    if (isIterableArray(invoice.products)) {\n      setSubtotal(calculateSubtotal(invoice.products));\n    }\n  }, [invoice]);\n\n  useEffect(() => {\n    setTax(subtotal * invoice.tax);\n  }, [subtotal, invoice]);\n\n  useEffect(() => {\n    setTotal(subtotal + tax);\n  }, [subtotal, tax]);\n\n  return (\n    <Fragment>\n      <Card className=\"mb-3\">\n        <CardBody>\n          <Row className=\"justify-content-between align-items-center\">\n            <Col md>\n              <h5 className=\"mb-2 mb-md-0\">Order #{invoiceLoading ? '' : invoice.summary.order_number}</h5>\n            </Col>\n            <Col xs=\"auto\">\n              <ButtonIcon color=\"falcon-default\" size=\"sm\" icon=\"arrow-down\" className=\"mr-2 mb-2 mb-sm-0\">\n                Download (.pdf)\n              </ButtonIcon>\n              <ButtonIcon color=\"falcon-default\" size=\"sm\" icon=\"print\" className=\"mr-2 mb-2 mb-sm-0\">\n                Print\n              </ButtonIcon>\n              <ButtonIcon color=\"falcon-success\" size=\"sm\" icon=\"dollar-sign\" className=\"mb-2 mb-sm-0\">\n                Receive Payment\n              </ButtonIcon>\n            </Col>\n          </Row>\n        </CardBody>\n      </Card>\n\n      <Card>\n        <CardBody>\n          {invoiceLoading ? (\n            <Loader />\n          ) : (\n            <InvoiceHeader institution={invoice.institution} logo={invoice.logo} address={invoice.address} />\n          )}\n\n          {invoiceLoading ? (\n            <Loader />\n          ) : (\n            <Row className=\"justify-content-between align-items-center\">\n              <Col>\n                <h6 className=\"text-500\">Invoice to</h6>\n                <h5>{invoice.user.name}</h5>\n                <p className=\"fs--1\" dangerouslySetInnerHTML={createMarkup(invoice.user.address)} />\n                <p className=\"fs--1\">\n                  <a href={`mailto:${invoice.user.email}`}>{invoice.user.email}</a>\n                  <br />\n                  <a href={`tel:${invoice.user.cell.split('-').join('')}`}>{invoice.user.cell}</a>\n                </p>\n              </Col>\n              <Col sm=\"auto\" className=\"ml-auto\">\n                <div className=\"table-responsive\">\n                  <Table size=\"sm\" borderless className=\"fs--1\">\n                    <tbody>\n                      <tr>\n                        <th className=\"text-sm-right\">Invoice No:</th>\n                        <td>{invoice.summary.invoice_no}</td>\n                      </tr>\n                      <tr>\n                        <th className=\"text-sm-right\">Order Number:</th>\n                        <td>{invoice.summary.order_number}</td>\n                      </tr>\n                      <tr>\n                        <th className=\"text-sm-right\">Invoice Date:</th>\n                        <td>{invoice.summary.invoice_date}</td>\n                      </tr>\n                      <tr>\n                        <th className=\"text-sm-right\">Payment Due:</th>\n                        <td>{invoice.summary.payment_due}</td>\n                      </tr>\n                      <tr className=\"alert-success font-weight-bold\">\n                        <th className=\"text-sm-right\">Amount Due:</th>\n                        <td>{formatCurrency(invoice.summary.amount_due, invoice.currency)}</td>\n                      </tr>\n                    </tbody>\n                  </Table>\n                </div>\n              </Col>\n            </Row>\n          )}\n\n          {invoiceLoading ? (\n            <Loader />\n          ) : (\n            <div className=\"table-responsive mt-4 fs--1\">\n              <Table striped className=\"border-bottom\">\n                <thead>\n                  <tr className=\"bg-primary text-white\">\n                    <th className=\"border-0\">Products</th>\n                    <th className=\"border-0 text-center\">Quantity</th>\n                    <th className=\"border-0 text-right\">Rate</th>\n                    <th className=\"border-0 text-right\">Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {isIterableArray(invoice.products) &&\n                    invoice.products.map((product, index) => <ProductTr {...product} key={index} />)}\n                </tbody>\n              </Table>\n            </div>\n          )}\n\n          {invoiceLoading ? (\n            <Loader />\n          ) : (\n            <Row noGutters className=\"justify-content-end\">\n              <Col xs=\"auto\">\n                <Table size=\"sm\" borderless className=\"fs--1 text-right\">\n                  <tbody>\n                    <tr>\n                      <th className=\"text-900\">Subtotal:</th>\n                      <td className=\"font-weight-semi-bold\">{formatCurrency(subtotal, invoice.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"text-900\">Tax 8%:</th>\n                      <td className=\"font-weight-semi-bold\">{formatCurrency(tax, invoice.currency)}</td>\n                    </tr>\n                    <tr className=\"border-top\">\n                      <th className=\"text-900\">Total:</th>\n                      <td className=\"font-weight-semi-bold\">{formatCurrency(total, invoice.currency)}</td>\n                    </tr>\n                    <tr className=\"border-top border-2x font-weight-bold text-900\">\n                      <th>Amount Due:</th>\n                      <td>{formatCurrency(invoice.summary.amount_due + total, invoice.currency)}</td>\n                    </tr>\n                  </tbody>\n                </Table>\n              </Col>\n            </Row>\n          )}\n        </CardBody>\n        <CardFooter className=\"bg-light\">\n          <p className=\"fs--1 mb-0\">\n            <strong>Notes: </strong>We really appreciate your business and if there’s anything else we can do, please\n            let us know!\n          </p>\n        </CardFooter>\n      </Card>\n    </Fragment>\n  );\n};\n\nexport default Invoice;\n"]},"metadata":{},"sourceType":"module"}