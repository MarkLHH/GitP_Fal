{"ast":null,"code":"import _objectSpread from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useContext,useEffect}from'react';import{Button,Card,CardBody,Col,CustomInput,Form,InputGroup,Row}from'reactstrap';import Loader from'../common/Loader';import useFakeFetch from'../../hooks/useFakeFetch';import{isIterableArray}from'../../helpers/utils';import Product from'./product/Product';import Flex from'../common/Flex';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import classNames from'classnames';import InputGroupAddon from'reactstrap/es/InputGroupAddon';import ProductFooter from'./product/ProductFooter';import usePagination from'../../hooks/usePagination';import{ProductContext}from'../../context/Context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var Products=function Products(_ref){var match=_ref.match,history=_ref.history;// Context\nvar _useContext=useContext(ProductContext),products=_useContext.products,setProductsLayout=_useContext.setProductsLayout,handleSort=_useContext.handleSort,sortBy=_useContext.sortBy,isAsc=_useContext.isAsc;// State\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),productIds=_useState2[0],setProductIds=_useState2[1];// Hook\nvar _useFakeFetch=useFakeFetch(products),loading=_useFakeFetch.loading;var _usePagination=usePagination(productIds,4),paginationData=_usePagination.data,paginationMeta=_usePagination.meta,paginationHandler=_usePagination.handler;var total=paginationMeta.total,itemsPerPage=paginationMeta.itemsPerPage,from=paginationMeta.from,to=paginationMeta.to;var perPage=paginationHandler.perPage;var productLayout=match.params.productLayout;var isList=productLayout==='list';var isGrid=productLayout==='grid';useEffect(function(){setProductIds(products.map(function(product){return product.id;}));},[products,setProductIds]);useEffect(function(){setProductsLayout(productLayout);},[setProductsLayout,productLayout]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{sm:\"auto\",className:\"mb-2 mb-sm-0\",tag:Flex,align:\"center\",children:[/*#__PURE__*/_jsxs(CustomInput,{id:\"itemsPerPage\",type:\"select\",bsSize:\"sm\",value:itemsPerPage,onChange:function onChange(_ref2){var target=_ref2.target;return perPage(Number(target.value));},children:[/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:4,children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:6,children:\"6\"}),/*#__PURE__*/_jsx(\"option\",{value:total,children:\"All\"})]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0 text-nowrap ml-2\",children:[\"Showing \",from,\"-\",to,\" of \",total,\" Products\"]})]}),/*#__PURE__*/_jsxs(Col,{sm:\"auto\",children:[/*#__PURE__*/_jsx(Form,{className:\"d-inline-block mr-3\",children:/*#__PURE__*/_jsxs(InputGroup,{size:\"sm\",tag:Flex,align:\"center\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"mr-1\",children:\"Sort by:\"}),/*#__PURE__*/_jsxs(CustomInput,{type:\"select\",defaultValue:sortBy,id:\"ProductSortBy\",onChange:function onChange(_ref3){var target=_ref3.target;return handleSort(target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"option\",{value:\"review\",children:\"Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"off\",children:\"Off\"})]}),/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"append\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleSort(sortBy);},className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:classNames({'sort-amount-up':isAsc,'sort-amount-down':!isAsc})})})})]})}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"cursor-pointer\",icon:classNames({'list-ul':isGrid,th:isList}),onClick:function onClick(){return history.push(\"/e-commerce/products/\".concat(isList?'grid':'list'));}})]})]})})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardBody,{className:classNames({'p-0  overflow-hidden':isList,'pb-0':isGrid}),children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(Row,{noGutters:isList,children:isIterableArray(products)&&products.filter(function(product){return paginationData.includes(product.id);}).map(function(product,index){return/*#__PURE__*/_createElement(Product,_objectSpread(_objectSpread({},product),{},{key:product.id,index:index}));})})}),/*#__PURE__*/_jsx(ProductFooter,{meta:paginationMeta,handler:paginationHandler})]})]});};export default Products;","map":{"version":3,"sources":["/workspace/GitP_Fal/src/components/e-commerce/Products.js"],"names":["React","Fragment","useState","useContext","useEffect","Button","Card","CardBody","Col","CustomInput","Form","InputGroup","Row","Loader","useFakeFetch","isIterableArray","Product","Flex","FontAwesomeIcon","classNames","InputGroupAddon","ProductFooter","usePagination","ProductContext","Products","match","history","products","setProductsLayout","handleSort","sortBy","isAsc","productIds","setProductIds","loading","paginationData","data","paginationMeta","meta","paginationHandler","handler","total","itemsPerPage","from","to","perPage","productLayout","params","isList","isGrid","map","product","id","target","Number","value","th","push","filter","includes","index"],"mappings":"2MAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,UAApC,CAAgDC,SAAhD,KAAiE,OAAjE,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,QAAvB,CAAiCC,GAAjC,CAAsCC,WAAtC,CAAmDC,IAAnD,CAAyDC,UAAzD,CAAqEC,GAArE,KAAgF,YAAhF,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CACA,OAASC,eAAT,KAAgC,qBAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,gBAAjB,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,yBAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,OAASC,cAAT,KAA+B,uBAA/B,C,2IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAwB,IAArBC,CAAAA,KAAqB,MAArBA,KAAqB,CAAdC,OAAc,MAAdA,OAAc,CACvC;AADuC,gBAE4BvB,UAAU,CAACoB,cAAD,CAFtC,CAE/BI,QAF+B,aAE/BA,QAF+B,CAErBC,iBAFqB,aAErBA,iBAFqB,CAEFC,UAFE,aAEFA,UAFE,CAEUC,MAFV,aAEUA,MAFV,CAEkBC,KAFlB,aAEkBA,KAFlB,CAIvC;AAJuC,cAKH7B,QAAQ,CAAC,EAAD,CALL,wCAKhC8B,UALgC,eAKpBC,aALoB,eAOvC;AAPuC,kBAQnBnB,YAAY,CAACa,QAAD,CARO,CAQ/BO,OAR+B,eAQ/BA,OAR+B,oBAS4CZ,aAAa,CAACU,UAAD,CAAa,CAAb,CATzD,CASzBG,cATyB,gBAS/BC,IAT+B,CASHC,cATG,gBASTC,IATS,CASsBC,iBATtB,gBASaC,OATb,IAU/BC,CAAAA,KAV+B,CAUGJ,cAVH,CAU/BI,KAV+B,CAUxBC,YAVwB,CAUGL,cAVH,CAUxBK,YAVwB,CAUVC,IAVU,CAUGN,cAVH,CAUVM,IAVU,CAUJC,EAVI,CAUGP,cAVH,CAUJO,EAVI,IAW/BC,CAAAA,OAX+B,CAWnBN,iBAXmB,CAW/BM,OAX+B,IAa/BC,CAAAA,aAb+B,CAabrB,KAAK,CAACsB,MAbO,CAa/BD,aAb+B,CAcvC,GAAME,CAAAA,MAAM,CAAGF,aAAa,GAAK,MAAjC,CACA,GAAMG,CAAAA,MAAM,CAAGH,aAAa,GAAK,MAAjC,CAEA1C,SAAS,CAAC,UAAM,CACd6B,aAAa,CAACN,QAAQ,CAACuB,GAAT,CAAa,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,EAAZ,EAApB,CAAD,CAAb,CACD,CAFQ,CAEN,CAACzB,QAAD,CAAWM,aAAX,CAFM,CAAT,CAIA7B,SAAS,CAAC,UAAM,CACdwB,iBAAiB,CAACkB,aAAD,CAAjB,CACD,CAFQ,CAEN,CAAClB,iBAAD,CAAoBkB,aAApB,CAFM,CAAT,CAIA,mBACE,MAAC,QAAD,yBACE,KAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,uBACE,KAAC,QAAD,wBACE,MAAC,GAAD,EAAK,SAAS,CAAC,4CAAf,wBACE,MAAC,GAAD,EAAK,EAAE,CAAC,MAAR,CAAe,SAAS,CAAC,cAAzB,CAAwC,GAAG,CAAE7B,IAA7C,CAAmD,KAAK,CAAC,QAAzD,wBACE,MAAC,WAAD,EACE,EAAE,CAAC,cADL,CAEE,IAAI,CAAC,QAFP,CAGE,MAAM,CAAC,IAHT,CAIE,KAAK,CAAEyB,YAJT,CAKE,QAAQ,CAAE,4BAAGW,CAAAA,MAAH,OAAGA,MAAH,OAAgBR,CAAAA,OAAO,CAACS,MAAM,CAACD,MAAM,CAACE,KAAR,CAAP,CAAvB,EALZ,wBAOE,eAAQ,KAAK,CAAE,CAAf,eAPF,cAQE,eAAQ,KAAK,CAAE,CAAf,eARF,cASE,eAAQ,KAAK,CAAE,CAAf,eATF,cAUE,eAAQ,KAAK,CAAEd,KAAf,iBAVF,GADF,cAaE,YAAI,SAAS,CAAC,uBAAd,sBACWE,IADX,KACkBC,EADlB,QAC0BH,KAD1B,eAbF,GADF,cAkBE,MAAC,GAAD,EAAK,EAAE,CAAC,MAAR,wBACE,KAAC,IAAD,EAAM,SAAS,CAAC,qBAAhB,uBACE,MAAC,UAAD,EAAY,IAAI,CAAC,IAAjB,CAAsB,GAAG,CAAExB,IAA3B,CAAiC,KAAK,CAAC,QAAvC,wBACE,cAAO,SAAS,CAAC,MAAjB,sBADF,cAEE,MAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,YAAY,CAAEa,MAFhB,CAGE,EAAE,CAAC,eAHL,CAIE,QAAQ,CAAE,4BAAGuB,CAAAA,MAAH,OAAGA,MAAH,OAAgBxB,CAAAA,UAAU,CAACwB,MAAM,CAACE,KAAR,CAA1B,EAJZ,wBAME,eAAQ,KAAK,CAAC,OAAd,mBANF,cAOE,eAAQ,KAAK,CAAC,QAAd,oBAPF,cAQE,eAAQ,KAAK,CAAC,QAAd,oBARF,cASE,eAAQ,KAAK,CAAC,KAAd,iBATF,GAFF,cAaE,KAAC,eAAD,EAAiB,SAAS,CAAC,QAA3B,uBACE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAM1B,CAAAA,UAAU,CAACC,MAAD,CAAhB,EAAjB,CAA2C,SAAS,CAAC,gBAArD,uBACE,KAAC,eAAD,EAAiB,IAAI,CAAEX,UAAU,CAAC,CAAE,iBAAkBY,KAApB,CAA2B,mBAAoB,CAACA,KAAhD,CAAD,CAAjC,EADF,EADF,EAbF,GADF,EADF,cAuBE,KAAC,eAAD,EACE,SAAS,CAAC,gBADZ,CAEE,IAAI,CAAEZ,UAAU,CAAC,CAAE,UAAW8B,MAAb,CAAqBO,EAAE,CAAER,MAAzB,CAAD,CAFlB,CAGE,OAAO,CAAE,yBAAMtB,CAAAA,OAAO,CAAC+B,IAAR,gCAAqCT,MAAM,CAAG,MAAH,CAAY,MAAvD,EAAN,EAHX,EAvBF,GAlBF,GADF,EADF,EADF,cAsDE,MAAC,IAAD,yBACE,KAAC,QAAD,EAAU,SAAS,CAAE7B,UAAU,CAAC,CAAE,uBAAwB6B,MAA1B,CAAkC,OAAQC,MAA1C,CAAD,CAA/B,UACGf,OAAO,cACN,KAAC,MAAD,IADM,cAGN,KAAC,GAAD,EAAK,SAAS,CAAEc,MAAhB,UACGjC,eAAe,CAACY,QAAD,CAAf,EACCA,QAAQ,CACL+B,MADH,CACU,SAAAP,OAAO,QAAIhB,CAAAA,cAAc,CAACwB,QAAf,CAAwBR,OAAO,CAACC,EAAhC,CAAJ,EADjB,EAEGF,GAFH,CAEO,SAACC,OAAD,CAAUS,KAAV,qBAAoB,eAAC,OAAD,gCAAaT,OAAb,MAAsB,GAAG,CAAEA,OAAO,CAACC,EAAnC,CAAuC,KAAK,CAAEQ,KAA9C,GAApB,EAFP,CAFJ,EAJJ,EADF,cAaE,KAAC,aAAD,EAAe,IAAI,CAAEvB,cAArB,CAAqC,OAAO,CAAEE,iBAA9C,EAbF,GAtDF,GADF,CAwED,CAjGD,CAmGA,cAAef,CAAAA,QAAf","sourcesContent":["import React, { Fragment, useState, useContext, useEffect } from 'react';\nimport { Button, Card, CardBody, Col, CustomInput, Form, InputGroup, Row } from 'reactstrap';\nimport Loader from '../common/Loader';\nimport useFakeFetch from '../../hooks/useFakeFetch';\nimport { isIterableArray } from '../../helpers/utils';\nimport Product from './product/Product';\nimport Flex from '../common/Flex';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classNames from 'classnames';\nimport InputGroupAddon from 'reactstrap/es/InputGroupAddon';\nimport ProductFooter from './product/ProductFooter';\nimport usePagination from '../../hooks/usePagination';\nimport { ProductContext } from '../../context/Context';\n\nconst Products = ({ match, history }) => {\n  // Context\n  const { products, setProductsLayout, handleSort, sortBy, isAsc } = useContext(ProductContext);\n\n  // State\n  const [productIds, setProductIds] = useState([]);\n\n  // Hook\n  const { loading } = useFakeFetch(products);\n  const { data: paginationData, meta: paginationMeta, handler: paginationHandler } = usePagination(productIds, 4);\n  const { total, itemsPerPage, from, to } = paginationMeta;\n  const { perPage } = paginationHandler;\n\n  const { productLayout } = match.params;\n  const isList = productLayout === 'list';\n  const isGrid = productLayout === 'grid';\n\n  useEffect(() => {\n    setProductIds(products.map(product => product.id));\n  }, [products, setProductIds]);\n\n  useEffect(() => {\n    setProductsLayout(productLayout);\n  }, [setProductsLayout, productLayout]);\n\n  return (\n    <Fragment>\n      <Card className=\"mb-3\">\n        <CardBody>\n          <Row className=\"justify-content-between align-items-center\">\n            <Col sm=\"auto\" className=\"mb-2 mb-sm-0\" tag={Flex} align=\"center\">\n              <CustomInput\n                id=\"itemsPerPage\"\n                type=\"select\"\n                bsSize=\"sm\"\n                value={itemsPerPage}\n                onChange={({ target }) => perPage(Number(target.value))}\n              >\n                <option value={2}>2</option>\n                <option value={4}>4</option>\n                <option value={6}>6</option>\n                <option value={total}>All</option>\n              </CustomInput>\n              <h6 className=\"mb-0 text-nowrap ml-2\">\n                Showing {from}-{to} of {total} Products\n              </h6>\n            </Col>\n            <Col sm=\"auto\">\n              <Form className=\"d-inline-block mr-3\">\n                <InputGroup size=\"sm\" tag={Flex} align=\"center\">\n                  <small className=\"mr-1\">Sort by:</small>\n                  <CustomInput\n                    type=\"select\"\n                    defaultValue={sortBy}\n                    id=\"ProductSortBy\"\n                    onChange={({ target }) => handleSort(target.value)}\n                  >\n                    <option value=\"price\">Price</option>\n                    <option value=\"rating\">Rating</option>\n                    <option value=\"review\">Review</option>\n                    <option value=\"off\">Off</option>\n                  </CustomInput>\n                  <InputGroupAddon addonType=\"append\">\n                    <Button onClick={() => handleSort(sortBy)} className=\"cursor-pointer\">\n                      <FontAwesomeIcon icon={classNames({ 'sort-amount-up': isAsc, 'sort-amount-down': !isAsc })} />\n                    </Button>\n                  </InputGroupAddon>\n                </InputGroup>\n              </Form>\n\n              <FontAwesomeIcon\n                className=\"cursor-pointer\"\n                icon={classNames({ 'list-ul': isGrid, th: isList })}\n                onClick={() => history.push(`/e-commerce/products/${isList ? 'grid' : 'list'}`)}\n              />\n            </Col>\n          </Row>\n        </CardBody>\n      </Card>\n\n      <Card>\n        <CardBody className={classNames({ 'p-0  overflow-hidden': isList, 'pb-0': isGrid })}>\n          {loading ? (\n            <Loader />\n          ) : (\n            <Row noGutters={isList}>\n              {isIterableArray(products) &&\n                products\n                  .filter(product => paginationData.includes(product.id))\n                  .map((product, index) => <Product {...product} key={product.id} index={index} />)}\n            </Row>\n          )}\n        </CardBody>\n        <ProductFooter meta={paginationMeta} handler={paginationHandler} />\n      </Card>\n    </Fragment>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}