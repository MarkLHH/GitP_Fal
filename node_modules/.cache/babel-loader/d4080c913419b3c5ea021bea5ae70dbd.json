{"ast":null,"code":"import _objectSpread from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/workspace/GitP_Fal/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import{Card,CardHeader,CardBody,CardFooter,Label,Input,Button,UncontrolledDropdown,DropdownToggle,DropdownMenu,DropdownItem,UncontrolledTooltip,Form}from'reactstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import QuillEditor from'../common/QuillEditor';import{toast}from'react-toastify';import{isIterableArray}from'../../helpers/utils';import useFakeFetch from'../../hooks/useFakeFetch';import Flex from'../common/Flex';import ComposeAttachment from'./ComposeAttachment';import rawEmailAdresses from'../../data/email/emailAddresses';import Select from'../common/Select';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var availableEmailAddresses=rawEmailAdresses.slice(0,10).map(function(emailAddress,index){return{value:index,label:emailAddress};});var validateEmails=function validateEmails(emails){// eslint-disable-next-line\nvar re=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/;if(isIterableArray(emails)){return emails.map(function(email){return re.test(String(email.label).toLowerCase());}).every(function(isValid){return isValid;});}return isIterableArray(emails);};var rawAttachments=[{id:1,name:'winter.jpg',size:893952,type:'image/jpg'},{id:2,name:'coffee.zip',size:350208,type:'application/zip'}];var Compose=function Compose(_ref){var recipientOption=_ref.recipientOption;var _useFakeFetch=useFakeFetch(rawAttachments),attachments=_useFakeFetch.data,setAttachments=_useFakeFetch.setData;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isDisabled=_useState2[0],setIsDisabled=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),recipients=_useState6[0],setRecipients=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),subject=_useState8[0],setSubject=_useState8[1];var handleDetachAttachment=function handleDetachAttachment(id){return setAttachments(attachments.filter(function(attachment){return id!==attachment.id;}));};var handleAddAttachment=function handleAddAttachment(files){if(files.length===0)return;var _files$=files[0],name=_files$.name,size=_files$.size,type=_files$.type;var newFile={id:attachments.length+1+Date.now(),name:name,size:size,type:type};setAttachments([].concat(_toConsumableArray(attachments),[newFile]));};var handleClear=function handleClear(){setContent('');setRecipients([]);setSubject('');setAttachments([]);};var handleSubmit=function handleSubmit(e){e.preventDefault();toast(/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"h6\",{children:[\"Subject: \",subject]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"An email is successfully sent to \",recipients.length>1?'recipients':'recipient',\".\"]})]}));handleClear();};useEffect(function(){setIsDisabled(!content||!validateEmails(recipients)||!subject);},[content,recipients,subject]);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Card,{tag:Form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(CardHeader,{className:\"bg-light\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"New message\"})}),/*#__PURE__*/_jsxs(CardBody,{className:\"p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-bottom border-200\",children:/*#__PURE__*/_jsx(Select,_objectSpread({options:availableEmailAddresses,placeholder:\"Recipients\",value:recipients,onChange:function onChange(value){return setRecipients(value);}},recipientOption))}),/*#__PURE__*/_jsx(Input,{className:\"form-control border-0 outline-none px-card\",type:\"text\",placeholder:\"Subject\",value:subject,onChange:function onChange(_ref2){var target=_ref2.target;return setSubject(target.value);},required:true}),/*#__PURE__*/_jsx(QuillEditor,{value:content,onChange:setContent,style:{height:300,marginBottom:44}}),isIterableArray(attachments)&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-light px-card py-3\",children:/*#__PURE__*/_jsx(Flex,{column:true,inline:true,children:attachments.map(function(attachment){return/*#__PURE__*/_createElement(ComposeAttachment,_objectSpread(_objectSpread({},attachment),{},{key:attachment.id,handleDetachAttachment:handleDetachAttachment}));})})})]}),/*#__PURE__*/_jsxs(CardFooter,{tag:Flex,justify:\"between\",className:\"border-top border-200\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",size:\"sm\",className:\"px-5 mr-2\",disabled:isDisabled,type:\"submit\",children:\"Send\"}),/*#__PURE__*/_jsx(Label,{for:\"email-attachment\",className:\"mr-2 btn btn-light btn-sm mb-0 cursor-pointer\",id:\"AttachFiles\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"paperclip\",className:\"fs-1\"})}),/*#__PURE__*/_jsx(Input,{className:\"d-none\",id:\"email-attachment\",type:\"file\",onChange:function onChange(_ref3){var target=_ref3.target;return handleAddAttachment(target.files);}}),/*#__PURE__*/_jsx(UncontrolledTooltip,{placement:\"top\",target:\"AttachFiles\",children:\"Attach files\"})]}),/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsxs(UncontrolledDropdown,{children:[/*#__PURE__*/_jsx(DropdownToggle,{className:\"btn btn-sm ml-2 text-600 py-2\",color:\"link\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"ellipsis-v\"})}),/*#__PURE__*/_jsxs(DropdownMenu,{right:true,children:[/*#__PURE__*/_jsx(DropdownItem,{children:\"Print\"}),/*#__PURE__*/_jsx(DropdownItem,{children:\"Check spelling\"}),/*#__PURE__*/_jsx(DropdownItem,{children:\"Plain text mode\"}),/*#__PURE__*/_jsx(DropdownItem,{divider:true}),/*#__PURE__*/_jsx(DropdownItem,{children:\"Archive\"})]})]}),/*#__PURE__*/_jsx(Label,{id:\"delete\",className:\"mr-2 btn btn-light btn-sm mb-0 cursor-pointer\",onClick:handleClear,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"trash\"})}),/*#__PURE__*/_jsx(UncontrolledTooltip,{placement:\"top\",target:\"delete\",children:\"Delete\"})]})]})]})});};Compose.defaultProps={recipientOption:{closeMenuOnSelect:false,autoFocus:true,isMulti:true,isCreatable:true}};export default Compose;","map":{"version":3,"sources":["/workspace/GitP_Fal/src/components/email/Compose.js"],"names":["React","Fragment","useState","useEffect","Card","CardHeader","CardBody","CardFooter","Label","Input","Button","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","UncontrolledTooltip","Form","FontAwesomeIcon","QuillEditor","toast","isIterableArray","useFakeFetch","Flex","ComposeAttachment","rawEmailAdresses","Select","availableEmailAddresses","slice","map","emailAddress","index","value","label","validateEmails","emails","re","email","test","String","toLowerCase","every","isValid","rawAttachments","id","name","size","type","Compose","recipientOption","attachments","data","setAttachments","setData","isDisabled","setIsDisabled","content","setContent","recipients","setRecipients","subject","setSubject","handleDetachAttachment","filter","attachment","handleAddAttachment","files","length","newFile","Date","now","handleClear","handleSubmit","e","preventDefault","target","height","marginBottom","defaultProps","closeMenuOnSelect","autoFocus","isMulti","isCreatable"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Label,\n  Input,\n  Button,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  UncontrolledTooltip,\n  Form\n} from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport QuillEditor from '../common/QuillEditor';\nimport { toast } from 'react-toastify';\nimport { isIterableArray } from '../../helpers/utils';\nimport useFakeFetch from '../../hooks/useFakeFetch';\nimport Flex from '../common/Flex';\nimport ComposeAttachment from './ComposeAttachment';\nimport rawEmailAdresses from '../../data/email/emailAddresses';\nimport Select from '../common/Select';\n\nconst availableEmailAddresses = rawEmailAdresses\n  .slice(0, 10)\n  .map((emailAddress, index) => ({ value: index, label: emailAddress }));\n\nconst validateEmails = emails => {\n  // eslint-disable-next-line\n  const re = /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/;\n\n  if (isIterableArray(emails)) {\n    return emails.map(email => re.test(String(email.label).toLowerCase())).every(isValid => isValid);\n  }\n  return isIterableArray(emails);\n};\n\nconst rawAttachments = [\n  { id: 1, name: 'winter.jpg', size: 893952, type: 'image/jpg' },\n  { id: 2, name: 'coffee.zip', size: 350208, type: 'application/zip' }\n];\n\nconst Compose = ({ recipientOption }) => {\n  const { data: attachments, setData: setAttachments } = useFakeFetch(rawAttachments);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [content, setContent] = useState('');\n  const [recipients, setRecipients] = useState([]);\n  const [subject, setSubject] = useState('');\n\n  const handleDetachAttachment = id => setAttachments(attachments.filter(attachment => id !== attachment.id));\n\n  const handleAddAttachment = files => {\n    if (files.length === 0) return;\n    const { name, size, type } = files[0];\n    const newFile = {\n      id: attachments.length + 1 + Date.now(),\n      name,\n      size,\n      type\n    };\n    setAttachments([...attachments, newFile]);\n  };\n\n  const handleClear = () => {\n    setContent('');\n    setRecipients([]);\n    setSubject('');\n    setAttachments([]);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    toast(\n      <Fragment>\n        <h6>Subject: {subject}</h6>\n        <hr />\n        <p className=\"mb-0\">An email is successfully sent to {recipients.length > 1 ? 'recipients' : 'recipient'}.</p>\n      </Fragment>\n    );\n    handleClear();\n  };\n\n  useEffect(() => {\n    setIsDisabled(!content || !validateEmails(recipients) || !subject);\n  }, [content, recipients, subject]);\n\n  return (\n    <Fragment>\n      <Card tag={Form} onSubmit={handleSubmit}>\n        <CardHeader className=\"bg-light\">\n          <h5 className=\"mb-0\">New message</h5>\n        </CardHeader>\n        <CardBody className=\"p-0\">\n          <div className=\"border-bottom border-200\">\n            <Select\n              options={availableEmailAddresses}\n              placeholder=\"Recipients\"\n              value={recipients}\n              onChange={value => setRecipients(value)}\n              {...recipientOption}\n            />\n          </div>\n          <Input\n            className=\"form-control border-0 outline-none px-card\"\n            type=\"text\"\n            placeholder=\"Subject\"\n            value={subject}\n            onChange={({ target }) => setSubject(target.value)}\n            required\n          />\n          <QuillEditor value={content} onChange={setContent} style={{ height: 300, marginBottom: 44 }} />\n          {isIterableArray(attachments) && (\n            <div className=\"bg-light px-card py-3\">\n              <Flex column inline>\n                {attachments.map(attachment => (\n                  <ComposeAttachment\n                    {...attachment}\n                    key={attachment.id}\n                    handleDetachAttachment={handleDetachAttachment}\n                  />\n                ))}\n              </Flex>\n            </div>\n          )}\n        </CardBody>\n        <CardFooter tag={Flex} justify=\"between\" className=\"border-top border-200\">\n          <Flex align=\"center\">\n            <Button color=\"primary\" size=\"sm\" className=\"px-5 mr-2\" disabled={isDisabled} type=\"submit\">\n              Send\n            </Button>\n            <Label for=\"email-attachment\" className=\"mr-2 btn btn-light btn-sm mb-0 cursor-pointer\" id=\"AttachFiles\">\n              <FontAwesomeIcon icon=\"paperclip\" className=\"fs-1\" />\n            </Label>\n            <Input\n              className=\"d-none\"\n              id=\"email-attachment\"\n              type=\"file\"\n              onChange={({ target }) => handleAddAttachment(target.files)}\n            />\n            <UncontrolledTooltip placement=\"top\" target=\"AttachFiles\">\n              Attach files\n            </UncontrolledTooltip>\n          </Flex>\n          <Flex align=\"center\">\n            <UncontrolledDropdown>\n              <DropdownToggle className=\"btn btn-sm ml-2 text-600 py-2\" color=\"link\">\n                <FontAwesomeIcon icon=\"ellipsis-v\" />\n              </DropdownToggle>\n              <DropdownMenu right>\n                <DropdownItem>Print</DropdownItem>\n                <DropdownItem>Check spelling</DropdownItem>\n                <DropdownItem>Plain text mode</DropdownItem>\n                <DropdownItem divider />\n                <DropdownItem>Archive</DropdownItem>\n              </DropdownMenu>\n            </UncontrolledDropdown>\n            <Label id=\"delete\" className=\"mr-2 btn btn-light btn-sm mb-0 cursor-pointer\" onClick={handleClear}>\n              <FontAwesomeIcon icon=\"trash\" />\n            </Label>\n            <UncontrolledTooltip placement=\"top\" target=\"delete\">\n              Delete\n            </UncontrolledTooltip>\n          </Flex>\n        </CardFooter>\n      </Card>\n    </Fragment>\n  );\n};\n\nCompose.propTypes = { recipientOption: PropTypes.object };\n\nCompose.defaultProps = {\n  recipientOption: {\n    closeMenuOnSelect: false,\n    autoFocus: true,\n    isMulti: true,\n    isCreatable: true\n  }\n};\n\nexport default Compose;\n"]},"metadata":{},"sourceType":"module"}